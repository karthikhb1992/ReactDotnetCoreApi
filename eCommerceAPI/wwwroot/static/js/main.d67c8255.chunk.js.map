{"version":3,"sources":["features/about/AboutPage.tsx","app/components/AppPagination.tsx","app/components/CheckboxButtons.tsx","app/components/RadioButtonGroup.tsx","app/layout/LoadingComponent.tsx","app/models/pagination.ts","app/api/agent.ts","app/util/util.ts","features/basket/basketSlice.ts","features/account/accountSlice.ts","features/catalog/catalogSlice.ts","features/contact/CounterSlice.tsx","app/store/configureStore.ts","features/catalog/ProductCard.tsx","features/catalog/ProductCardSkeleton.tsx","features/catalog/ProductList.tsx","features/catalog/ProductSearch.tsx","features/catalog/catalog.tsx","app/errors/NotFound.tsx","features/catalog/ProductDetails.tsx","features/contact/ContactPage.tsx","features/home/HomePage.tsx","app/layout/SignedInMenu.tsx","app/layout/Header.tsx","app/errors/ServerError.tsx","features/basket/BasketSummary.tsx","features/basket/BasketTable.tsx","features/basket/BasketPage.tsx","app/components/AppTextInput.tsx","app/components/AppCheckbox.tsx","features/checkout/AddressForm.tsx","features/checkout/PaymentForm.tsx","features/checkout/Review.tsx","features/checkout/checkoutValidation.ts","features/checkout/CheckoutPage.tsx","features/account/Login.tsx","features/account/Register.tsx","app/layout/PrivateRoute.tsx","features/orders/OrderDetailed.tsx","features/orders/Orders.tsx","app/layout/App.tsx","reportWebVitals.ts","index.tsx"],"names":["AboutPage","Typography","variant","AppPagination","metaData","onPageChange","currentPage","totalCount","pageSize","totalPages","Box","display","justifyContent","alignItems","Pagination","color","size","count","page","onChange","e","CheckboxButtons","items","checked","useState","checkedItems","setCheckedItems","FormGroup","map","item","FormControlLabel","control","Checkbox","indexOf","onClick","value","newChecked","findIndex","filter","handleChecked","label","RadioButtonGroup","options","selectedValue","FormControl","component","RadioGroup","Radio","LoadingComponent","message","Backdrop","open","invisible","height","CircularProgress","sx","position","top","PaginatedResponse","this","axios","defaults","baseURL","process","withCredentials","responseBody","response","data","interceptors","request","use","config","token","store","getState","account","user","headers","Authorization","a","pagination","JSON","parse","error","status","errors","modelStateErrors","key","push","flat","toast","title","history","pathname","state","Promise","reject","requests","url","params","get","then","body","post","delete","Basket","addItem","productId","quantity","removeItem","agent","Catalog","list","details","id","fetchFilters","Account","login","values","register","currentUser","fetchAddress","Orders","fetch","create","currencyFormat","amount","toFixed","fetchBasketAsync","createAsyncThunk","_","thunkAPI","rejectWithValue","condition","b","document","cookie","match","pop","getCookie","addBasketItemAsync","removeBasketItemAsync","basketSlice","createSlice","name","initialState","basket","reducers","setBasket","action","payload","clearBasket","extraReducers","builder","addCase","pending","meta","arg","fulfilled","itemIndex","i","undefined","splice","rejected","addMatcher","isAnyOf","actions","signInUser","userDto","dispatch","localStorage","setItem","stringify","fetchCurrentUser","setUser","getItem","accountSlice","signOut","console","log","productsAdapter","createEntityAdapter","getAxiosParams","productParams","URLSearchParams","append","pageNumber","toString","orderBy","searchTerm","brands","length","types","fetchProductsAsync","catalog","setMetaData","fetchProductAsync","catalogSlice","getInitialState","productsLoaded","filtersLoaded","setProductParams","setPageNumber","resetProductParams","setAll","upsertOne","productSelectors","getSelectors","counterSlice","increment","decrement","configureStore","reducer","counter","useAppDispatch","useDispatch","useAppSelector","useSelector","ProductCard","product","Card","CardHeader","avatar","Avatar","bgcolor","charAt","toUpperCase","titleTypographyProps","fontWeight","CardMedia","backgroundSize","image","pictureUrl","CardContent","gutterBottom","price","brand","type","CardActions","LoadingButton","loading","includes","Button","Link","to","ProductCardSkeleton","Grid","xs","Skeleton","animation","width","style","marginBottom","ProductList","products","container","spacing","ProductSearch","setSearchTerm","debouncedSearch","debounce","event","target","TextField","fullWidth","sortOptions","selectAll","useEffect","columnSpacing","Paper","mb","p","NotFound","Container","Divider","ProductDetails","useParams","selectById","productStatus","setQuantity","find","parseInt","src","alt","TableContainer","Table","TableBody","TableRow","TableCell","description","quantityInStock","disabled","updatedQuantity","ContactPage","ButtonGroup","HomePage","dots","infinite","speed","slidesToShow","slidesToScroll","maxHeight","SignedInMenu","React","anchorEl","setAnchorEl","Boolean","handleClose","currentTarget","typography","email","Menu","onClose","MenuItem","midLinks","path","rightLinks","navStyles","textDecoration","Header","darkMode","handleThemeChange","itemCount","reduce","sum","AppBar","Toolbar","NavLink","exact","Switch","List","ListItem","IconButton","Badge","badgeContent","ShoppingCart","ServerError","useHistory","useLocation","detail","BasketSummary","subtotal","deliveryFee","colSpan","align","fontStyle","BasketTable","isBasket","minWidth","TableHead","border","scope","marginRight","Remove","Add","Delete","BasketPage","AppTextInput","props","useController","defaultValue","fieldState","field","helperText","AppCheckbox","AddressForm","useFormContext","formState","sm","isDirty","PaymentForm","md","autoComplete","Review","validationSchema","yup","fullName","required","address1","address2","city","zip","country","nameOnCard","steps","getStepContent","step","Error","CheckoutPage","activeStep","setActiveStep","orderNumber","setOrderNumber","setLoading","currentValidationSchema","methods","useForm","mode","resolver","yupResolver","reset","getValues","saveAddress","handleNext","shippingAddress","my","Stepper","pt","pb","Step","StepLabel","onSubmit","handleSubmit","mt","ml","isValid","Login","location","isSubmitting","from","maxWidth","flexDirection","m","noValidate","margin","autoFocus","username","password","Register","setError","success","catch","forEach","handleApiErrors","pattern","PrivateRoute","Component","rest","render","OrderDetailed","order","setSelectedOrder","orderItems","orderStatus","orders","setOrders","selectedOrderNumber","setSelectedOrderNumber","finally","o","total","orderDate","split","App","initApp","useCallback","setDarkMode","paletteType","theme","createTheme","palette","background","default","ThemeProvider","hideProgressBar","CssBaseline","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","createBrowserHistory","ReactDOM","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.d67c8255.chunk.js","sourcesContent":["import { Typography } from \"@mui/material\";\r\n\r\nexport default function AboutPage() {\r\n  return <Typography variant=\"h2\">About Page</Typography>;\r\n}\r\n","import { Box, Pagination, Typography } from \"@mui/material\";\r\nimport { MetaData } from \"../models/pagination\";\r\n\r\ninterface Props {\r\n    metaData : MetaData;\r\n    onPageChange : (page:number) => void; \r\n}\r\n\r\nexport default function AppPagination({metaData,onPageChange} : Props) {\r\n    const {currentPage, totalCount,totalPages,pageSize} = metaData;\r\n    return (\r\n        <Box display='flex' justifyContent='space-between' alignItems= 'center'>\r\n        <Typography>\r\n            Displaying {(currentPage - 1) * pageSize + 1}-\r\n            {currentPage * pageSize > totalCount \r\n            ? totalCount \r\n            : currentPage * pageSize}\r\n             of {totalCount} items\r\n        </Typography>\r\n        <Pagination \r\n         color='secondary'\r\n         size='large'\r\n         count = {metaData?.totalPages}\r\n         page={metaData?.currentPage}\r\n         onChange = {(e , page) => onPageChange(page)}\r\n        />\r\n      </Box>\r\n    )\r\n}","import { FormGroup, FormControlLabel, Checkbox } from \"@mui/material\";\r\nimport { useState } from \"react\";\r\n\r\ninterface Props {\r\n    items : string[];\r\n    checked? : string[];\r\n    onChange: (items:string[]) => void\r\n}\r\n\r\nexport default function CheckboxButtons({items,checked,onChange} : Props) {\r\n\r\n  const [checkedItems,setCheckedItems] = useState(checked || []);\r\n\r\n  function handleChecked(value : string) {\r\n      const currentIndex = checkedItems?.findIndex(item => item === value);\r\n      let newChecked : string[]= [];\r\n      if(currentIndex === - 1) newChecked = [...checkedItems,value];\r\n      else newChecked = checkedItems.filter(item => item!== value);\r\n      setCheckedItems(newChecked);\r\n      onChange(newChecked);\r\n\r\n  }\r\n  return (\r\n    <FormGroup>\r\n      {items.map((item) => (\r\n        <FormControlLabel \r\n        control={<Checkbox\r\n            checked = {checkedItems.indexOf(item) !== -1}\r\n            onClick={() => handleChecked(item)}\r\n            />}\r\n         label={item}\r\n          key={item} />\r\n      ))}\r\n    </FormGroup>\r\n  );\r\n}\r\n","import { FormControl, FormControlLabel, Radio, RadioGroup } from \"@mui/material\";\r\n\r\n\r\ninterface Props {\r\n    options: any[];\r\n    onChange: (event:any) => void;\r\n    selectedValue : string;\r\n}\r\n\r\nexport default function RadioButtonGroup({options,onChange,selectedValue} : Props) {\r\n    return (\r\n        <FormControl component=\"fieldset\">\r\n            <RadioGroup onChange={onChange} value={selectedValue}>\r\n              {options.map(({ value, label }) => (\r\n                <FormControlLabel\r\n                  value={value}\r\n                  control={<Radio />}\r\n                  label={label}\r\n                  key ={value}\r\n                />\r\n              ))}\r\n            </RadioGroup>\r\n          </FormControl>\r\n    )\r\n}","import { Backdrop, Box, CircularProgress, Typography } from \"@mui/material\";\r\n\r\ninterface Props {\r\n    message ?: string;\r\n}\r\n\r\n\r\nexport default function LoadingComponent({message = 'Loading...'} : Props) {\r\n  return (\r\n    <Backdrop open={true} invisible={true}>\r\n      <Box\r\n        display=\"flex\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        height=\"100vh\"\r\n      >\r\n        <CircularProgress size={100} color=\"secondary\" />\r\n        <Typography variant ='h4' sx= {{justifyContent: 'center',position:'fixed' , top:'60%'}}>{message} </Typography>\r\n      </Box>\r\n    </Backdrop>\r\n  );\r\n}\r\n","export interface MetaData {\r\n    currentPage:number;\r\n    totalPages : number;\r\n    pageSize:number;\r\n    totalCount : number;\r\n}\r\n\r\nexport class PaginatedResponse <T> {\r\n    items : T;\r\n    metaData : MetaData;\r\n\r\n    constructor(items : T,metaData : MetaData) {\r\n        this.items = items;\r\n        this.metaData = metaData;\r\n    }\r\n    \r\n}","import axios, { AxiosError, AxiosResponse } from \"axios\" ;\r\nimport { toast } from \"react-toastify\";\r\nimport { history } from \"../..\";\r\nimport { PaginatedResponse } from \"../models/pagination\";\r\nimport { store } from \"../store/configureStore\";\r\n\r\nconst sleep = () => new Promise(resolve => setTimeout(resolve,500));\r\n\r\naxios.defaults.baseURL = process.env.REACT_APP_API_URL;\r\naxios.defaults.withCredentials = true;\r\n\r\nconst responseBody = (response:AxiosResponse) => response.data;\r\n\r\naxios.interceptors.request.use(config => {\r\n    const token = store.getState().account.user?.token;\r\n    if(token)  config.headers!.Authorization = `Bearer ${token}`;\r\n    return config;\r\n\r\n})\r\n\r\naxios.interceptors.response.use(async response => {\r\n    if(process.env.NODE_ENV === 'development') await sleep();\r\n    \r\n    const pagination = response.headers['pagination'];\r\n\r\n    if(pagination) {\r\n        response.data = new PaginatedResponse(response.data,JSON.parse(pagination));\r\n        return response;\r\n    }\r\n   \r\n    return response\r\n},(error : AxiosError) => {\r\n    const {data,status} = error.response!; // to turn-off the type-safety of typescript\r\n    switch (status) {\r\n        case 400:\r\n            if(data.errors) {\r\n                const modelStateErrors : string[] = [];\r\n                for(const key in data.errors) {\r\n                    if(data.errors[key]) {\r\n                        modelStateErrors.push(data.errors[key]);\r\n                    }\r\n                }\r\n\r\n                throw modelStateErrors.flat();\r\n            }\r\n            toast.error(data.title);\r\n            break;\r\n    case 401:\r\n            toast.error(data.title);\r\n            break;\r\n    case 500:\r\n            history.push({\r\n                pathname : '/server-error',\r\n                state : {error:data}\r\n            });\r\n            break;\r\n        default:\r\n            break;\r\n    }\r\n    return Promise.reject(error.response);\r\n})\r\n\r\nconst requests = {\r\n    get : (url :string,params?: URLSearchParams) => axios.get(url,{params}).then(responseBody),\r\n    post : (url :string,body : any) => axios.post(url,body,{\r\n        headers: {\r\n            'Content-Type': 'application/json-patch+json',\r\n        }\r\n        }).then(responseBody),\r\n    put : (url :string , body : {}) => axios.put(url).then(responseBody),\r\n    delete : (url :string) => axios.delete(url).then(responseBody),\r\n}\r\n\r\nconst Catalog = {\r\n    list: (params:URLSearchParams) => requests.get('products',params),\r\n    details: (id : number) => requests.get(`products/${id}`),\r\n    fetchFilters: () => requests.get('products/filters')\r\n}\r\n\r\nconst Basket = {\r\n    get: () => requests.get('basket'),\r\n    addItem: (productId: number, quantity =1) => requests.post(`basket?productId=${productId}&quantity=${quantity}`,{}),\r\n    removeItem: (productId: number, quantity =1) => requests.delete(`basket?productId=${productId}&quantity=${quantity}`),\r\n}\r\n\r\nconst Account = {\r\n    login : (values:any) => requests.post(`account/login`,values),\r\n    register : (values:any) => requests.post(`account/register`,values),\r\n    currentUser:() => requests.get('account/currentUser'),\r\n    fetchAddress : () => requests.get('account/savedAddress')\r\n}\r\n\r\n\r\nconst Orders = {\r\n    list : () => requests.get('orders'),\r\n    fetch : (id:number) => requests.get(`orders/${id}`),\r\n    create: (values:any) => requests.post('orders',values)\r\n}\r\nconst agent = {\r\n    Catalog,\r\n    Basket,\r\n    Account,\r\n    Orders\r\n}\r\n\r\nexport default agent;","export function getCookie(key:string) {\r\n    const b = document.cookie.match(\"(^|;)\\\\s*\" + key + \"\\\\s*=\\\\s*([^;]+)\");\r\n    return b ? b.pop() : \"\";\r\n  }\r\n\r\n  export function currencyFormat(amount:number) {\r\n    return '$' + (amount/100).toFixed(2);\r\n  }","import { createAsyncThunk, createSlice, isAnyOf } from \"@reduxjs/toolkit\";\r\nimport agent from \"../../app/api/agent\";\r\nimport { Basket } from \"../../app/models/basket\";\r\nimport { getCookie } from \"../../app/util/util\";\r\n\r\ninterface BasketState {\r\n    basket : Basket | null;\r\n    status : string;\r\n}\r\n\r\nconst initialState : BasketState = {\r\n    basket:null,\r\n    status:'idle'\r\n}\r\n\r\nexport const fetchBasketAsync = createAsyncThunk<Basket>(\r\n    'basket/fetchBasketAsync',\r\n    async(_, thunkAPI) => {\r\n            try {\r\n                return await agent.Basket.get();\r\n            }\r\n            catch(error : any) {\r\n                return thunkAPI.rejectWithValue({error:error.data});\r\n            }\r\n    },\r\n    {\r\n        condition:() => {\r\n            if(!getCookie('buyerId')) return false;\r\n        }\r\n    }\r\n)\r\n\r\nexport const addBasketItemAsync = createAsyncThunk<Basket,{productId:number,quantity?:number}>(\r\n    'basket/addBasketItemAsync',\r\n    async({productId,quantity = 1},thunkAPI)  => {\r\n        try {\r\n            return await agent.Basket.addItem(productId,quantity);\r\n        }\r\n        catch(error : any) {\r\n            return thunkAPI.rejectWithValue({error:error.data})\r\n        }\r\n    }\r\n)\r\n\r\nexport const removeBasketItemAsync = createAsyncThunk<void,{productId: number, quantity: number,name? :string}> (\r\n    'basket/removeBasketItemAsync',\r\n    async({productId,quantity},thunkAPI) => {\r\n        try{\r\n            await agent.Basket.removeItem(productId,quantity);\r\n        }\r\n        catch(error:any) {\r\n            return thunkAPI.rejectWithValue({error:error.data});\r\n        }\r\n    }\r\n)\r\n\r\nexport const basketSlice = createSlice({\r\n    name:'basket',\r\n    initialState,\r\n    reducers: {\r\n        setBasket : (state,action) => {\r\n            state.basket = action.payload;\r\n        },\r\n\r\n        clearBasket : (state) => {\r\n            state.basket = null;\r\n        }\r\n    },\r\n    extraReducers:(builder => {\r\n        builder.addCase(addBasketItemAsync.pending,(state,action) => {\r\n            state.status = 'pendingAddItem' + action.meta.arg.productId;\r\n        });\r\n        builder.addCase(removeBasketItemAsync.pending,(state,action) => {\r\n                state.status='pendingRemoveItem' + action.meta.arg.productId + action.meta.arg.name;\r\n        });\r\n        builder.addCase(removeBasketItemAsync.fulfilled,(state,action) => {\r\n            const {productId,quantity} = action.meta.arg;\r\n            const itemIndex = state.basket?.items.findIndex(i=>i.productId === productId);\r\n            if(itemIndex === -1 || itemIndex === undefined) return;\r\n            state.basket!.items[itemIndex].quantity -= quantity;\r\n            if(state.basket?.items[itemIndex].quantity === 0)\r\n                 state.basket.items.splice(itemIndex,1);\r\n\r\n            state.status = 'idle';\r\n        });\r\n\r\n        builder.addCase(removeBasketItemAsync.rejected,(state) => {\r\n            state.status = 'idle';\r\n        });\r\n        builder.addMatcher(isAnyOf(addBasketItemAsync.fulfilled,fetchBasketAsync.fulfilled),(state,action) => {\r\n            state.basket = action.payload;\r\n            state.status = 'idle';\r\n        });\r\n        builder.addMatcher(isAnyOf(addBasketItemAsync.rejected,fetchBasketAsync.rejected),(state) => {\r\n            state.status = 'idle';\r\n        });\r\n\r\n    })\r\n})\r\n\r\nexport const {setBasket,clearBasket} = basketSlice.actions;","import { createAsyncThunk, createSlice, isAnyOf } from \"@reduxjs/toolkit\";\r\nimport { FieldValues } from \"react-hook-form\";\r\nimport { toast } from \"react-toastify\";\r\nimport { history } from \"../..\";\r\nimport agent from \"../../app/api/agent\";\r\nimport { User } from \"../../app/models/user\";\r\nimport { setBasket } from \"../basket/basketSlice\";\r\n\r\ninterface AccountState {\r\n    user: User | null;\r\n}\r\n\r\n\r\nconst initialState : AccountState = {\r\n    user:null\r\n}\r\n\r\nexport const signInUser = createAsyncThunk<User,FieldValues> (\r\n    'account/signInUser',\r\n    async (data,thunkAPI) => {\r\n        try {\r\n            const userDto = await agent.Account.login(data);\r\n            const {basket,...user} = userDto;\r\n            if (basket) thunkAPI.dispatch(setBasket(basket));\r\n            localStorage.setItem('user',JSON.stringify(user));\r\n            return user;\r\n        }   \r\n        catch(error:any) {\r\n            return thunkAPI.rejectWithValue({error:error.data});\r\n        }\r\n    }\r\n)\r\n\r\nexport const fetchCurrentUser = createAsyncThunk<User> (\r\n    'account/fetchCurrentUser',\r\n    async (_,thunkAPI) => {\r\n        thunkAPI.dispatch(setUser(JSON.parse(localStorage.getItem('user')!)));\r\n        try {\r\n            const userDto = await agent.Account.currentUser();\r\n            const {basket,...user} = userDto;\r\n            if (basket) thunkAPI.dispatch(setBasket(basket));\r\n            localStorage.setItem('user',JSON.stringify(user));\r\n            return user;\r\n        }   \r\n        catch(error:any) {\r\n            return thunkAPI.rejectWithValue({error:error.data});\r\n        }\r\n    },\r\n    {\r\n        condition: () => {\r\n            if(!localStorage.getItem('user')) return false;\r\n        }\r\n    }\r\n)\r\n\r\nexport const accountSlice = createSlice({\r\n    name:'account',\r\n    initialState,\r\n    reducers:{\r\n        signOut : (state) => {\r\n            \r\n            state.user = null;\r\n            localStorage.removeItem('user');\r\n            history.push('/');\r\n        },\r\n        setUser : (state,action) => {\r\n            state.user = action.payload;\r\n        } \r\n    },\r\n    extraReducers:(builder => {\r\n\r\n        builder.addCase(fetchCurrentUser.rejected,(state) => {\r\n            state.user = null;\r\n            localStorage.removeItem('user');\r\n            toast.error('Session expired - Please login again');\r\n            history.push('/');\r\n        });\r\n\r\n        builder.addMatcher(isAnyOf(signInUser.fulfilled,fetchCurrentUser.fulfilled),(state,action) => {\r\n            state.user = action.payload;\r\n        });\r\n\r\n        builder.addMatcher(isAnyOf(signInUser.rejected),(state,action) => {\r\n            console.log(action.payload);\r\n        });\r\n    })\r\n})\r\n\r\nexport const {signOut,setUser} = accountSlice.actions;\r\n","import { createAsyncThunk, createEntityAdapter, createSlice } from \"@reduxjs/toolkit\";\r\nimport agent from \"../../app/api/agent\";\r\nimport { MetaData } from \"../../app/models/pagination\";\r\nimport { Product, ProductParams } from \"../../app/models/product\";\r\nimport { RootState } from \"../../app/store/configureStore\";\r\n\r\ninterface CatalogState {\r\n    productsLoaded : boolean;\r\n    filtersLoaded : boolean;\r\n    status:string;\r\n    brands : string[];\r\n    types : string[];\r\n    productParams : ProductParams;\r\n    metaData : MetaData | null;\r\n}\r\n\r\n\r\nconst productsAdapter = createEntityAdapter<Product>();\r\n\r\nfunction getAxiosParams(productParams : ProductParams) {\r\n    const params = new URLSearchParams();\r\n    params.append('pageNumber',productParams.pageNumber.toString());\r\n    params.append('pageSize',productParams.pageSize.toString());\r\n    params.append('orderBy',productParams.orderBy);\r\n    if(productParams.searchTerm) params.append('searchTerm',productParams.searchTerm);\r\n    if(productParams.brands.length > 0) params.append('brands',productParams.brands.toString());\r\n    if(productParams.types.length > 0) params.append('types',productParams.types.toString());\r\n    return params;\r\n}\r\n\r\n\r\nexport const fetchProductsAsync = createAsyncThunk<Product[],void,{state:RootState}> (\r\n    'catalog/fetchProductsAsync',\r\n    async (_, thunkAPI) => {\r\n        const params = getAxiosParams(thunkAPI.getState().catalog.productParams);\r\n        try{\r\n            debugger;\r\n          const response =  await agent.Catalog.list(params);\r\n          thunkAPI.dispatch(setMetaData(response.metaData));\r\n          return response.items;\r\n        }\r\n        catch(error:any) {\r\n            debugger;\r\n            return thunkAPI.rejectWithValue({error:error.data});\r\n        }\r\n    }\r\n)\r\n\r\nexport const fetchProductAsync = createAsyncThunk<Product,number> (\r\n    'catalog/fetchProductAsync',\r\n    async (productId,thunkAPI) => {\r\n        try{\r\n            return await agent.Catalog.details(productId);\r\n        }\r\n        catch(error : any) {\r\n           return thunkAPI.rejectWithValue({error: error.data})\r\n        }\r\n    }\r\n)\r\n\r\nexport const fetchFilters = createAsyncThunk(\r\n    'catalog/fetchFilters',\r\n    async(_, thunkAPI) => {\r\n        try {\r\n            return agent.Catalog.fetchFilters();\r\n        }\r\n        catch(error : any) {\r\n            return thunkAPI.rejectWithValue({error:error.data})\r\n        }\r\n    }\r\n)\r\n\r\nfunction initParams() {\r\n    return {\r\n        pageNumber:1,\r\n        pageSize:6,\r\n        orderBy:'name',\r\n        brands : [],\r\n        types : []\r\n    }\r\n}\r\n\r\n\r\nexport const catalogSlice = createSlice({\r\n    name:'catalog',\r\n    initialState : productsAdapter.getInitialState<CatalogState>({\r\n        productsLoaded : false,\r\n        filtersLoaded : false,\r\n        status: 'idle',\r\n        brands:[],\r\n        types: [],\r\n        productParams: initParams(),\r\n        metaData : null\r\n    }),\r\n    reducers: {\r\n        setProductParams : (state,action) => {\r\n            state.productsLoaded = false;\r\n            state.productParams = {...state.productParams, ...action.payload,pageNumber:1};\r\n        },\r\n        setPageNumber: (state,action) => {\r\n            state.productsLoaded = false;\r\n            state.productParams = {...state.productParams, ...action.payload};\r\n\r\n        },\r\n        setMetaData : (state,action) => {\r\n            state.metaData = action.payload;\r\n        },\r\n        resetProductParams: (state) => {\r\n            state.productParams = initParams();\r\n        }\r\n    },\r\n    extraReducers:(builder => {\r\n        builder.addCase(fetchProductsAsync.pending,(state) => {\r\n            state.status = 'pendingFetchProducts'\r\n        });\r\n        builder.addCase(fetchProductsAsync.fulfilled,(state,action) => {\r\n            productsAdapter.setAll(state,action.payload);\r\n            state.status = 'idle';\r\n            state.productsLoaded = true;\r\n        });\r\n\r\n        builder.addCase(fetchProductsAsync.rejected,(state) => {\r\n            state.status = 'idle';\r\n        });\r\n\r\n        builder.addCase(fetchProductAsync.pending,(state) => {\r\n            state.status = 'pendingFetchProduct';\r\n        });\r\n\r\n        builder.addCase(fetchProductAsync.fulfilled,(state,action) => {\r\n            productsAdapter.upsertOne(state,action.payload);\r\n            state.status = 'idle';\r\n        });\r\n\r\n        builder.addCase(fetchProductAsync.rejected,(state) => {\r\n            state.status ='idle'\r\n        });\r\n\r\n        builder.addCase(fetchFilters.pending,(state) => {\r\n            state.status = 'pendingFetchFilters';\r\n        });\r\n\r\n        builder.addCase(fetchFilters.fulfilled,(state,action) => {\r\n            state.brands = action.payload.brands;\r\n            state.types = action.payload.types;\r\n            state.filtersLoaded = true;\r\n            state.status = 'idle';\r\n        });\r\n\r\n        builder.addCase(fetchFilters.rejected,(state,action) => {\r\n            state.status = 'idle';\r\n\r\n        })\r\n\r\n    })\r\n})\r\n\r\n\r\nexport const productSelectors = productsAdapter.getSelectors((state:RootState) => state.catalog)\r\n\r\n export const {setProductParams, resetProductParams,setMetaData,setPageNumber} = catalogSlice.actions;\r\n","import { createSlice } from \"@reduxjs/toolkit\";\r\n\r\nexport interface CounterState {\r\n    data:number;\r\n    title:string;\r\n\r\n}\r\nconst initialState : CounterState = {\r\n    data: 42,\r\n    title : 'karthik'\r\n}\r\n\r\nexport const counterSlice  = createSlice({\r\n    name:'counter',\r\n    initialState,\r\n    reducers : {\r\n        increment:(state,action) => {\r\n                state.data +=action.payload;\r\n        },\r\n        decrement:(state,action) => {\r\n            state.data -=action.payload;\r\n        }\r\n    }\r\n})\r\n\r\nexport const  {increment,decrement} = counterSlice.actions;","import { configureStore } from \"@reduxjs/toolkit\";\r\nimport { TypedUseSelectorHook, useDispatch, useSelector } from \"react-redux\";\r\nimport { accountSlice } from \"../../features/account/accountSlice\";\r\nimport { basketSlice } from \"../../features/basket/basketSlice\";\r\nimport { catalogSlice } from \"../../features/catalog/catalogSlice\";\r\nimport { counterSlice } from \"../../features/contact/CounterSlice\";\r\n\r\n// export function configureStore() {\r\n//     return createStore(counterReducer);\r\n// }\r\n\r\nexport const store  = configureStore({\r\n    reducer: {\r\n        counter : counterSlice.reducer,\r\n        basket: basketSlice.reducer,\r\n        catalog:catalogSlice.reducer,\r\n        account:accountSlice.reducer\r\n    }\r\n})\r\n\r\nexport type RootState = ReturnType<typeof store.getState>;\r\nexport type AppDispatch  = typeof store.dispatch;\r\n\r\nexport const useAppDispatch = () => useDispatch<AppDispatch>();\r\nexport const useAppSelector:TypedUseSelectorHook<RootState> = useSelector;\r\n\r\n\r\n\r\n","import { LoadingButton } from \"@mui/lab\";\r\nimport {\r\n  Avatar,\r\n  Button,\r\n  Card,\r\n  CardActions,\r\n  CardContent,\r\n  CardHeader,\r\n  CardMedia,\r\n  Typography,\r\n} from \"@mui/material\";\r\nimport { useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport agent from \"../../app/api/agent\";\r\nimport { useStoreContext } from \"../../app/context/StoreContext\";\r\nimport { Product } from \"../../app/models/product\";\r\nimport { useAppDispatch, useAppSelector } from \"../../app/store/configureStore\";\r\nimport { currencyFormat } from \"../../app/util/util\";\r\nimport { addBasketItemAsync, setBasket } from \"../basket/basketSlice\";\r\n\r\ninterface Props {\r\n  product: Product;\r\n}\r\n\r\nexport default function ProductCard({ product }: Props) {\r\n  const {status} = useAppSelector(state => state.basket);\r\n  const dispatch = useAppDispatch();\r\n\r\n  \r\n  return (\r\n    <Card>\r\n      <CardHeader\r\n        avatar={<Avatar sx= {{bgcolor:'secondary.main'}}>\r\n          {product.name.charAt(0).toUpperCase()}\r\n          </Avatar>}\r\n        title={product.name}\r\n        titleTypographyProps = {{\r\n          sx: {fontWeight : 'bold' , color:'primary.main'}\r\n        }}\r\n      />\r\n      <CardMedia\r\n        sx ={{height: 140 , backgroundSize: 'contain' , bgcolor:'primary.light' }}\r\n        component=\"img\"\r\n        height=\"140\"\r\n        image={product.pictureUrl}\r\n        title = {product.name}\r\n      />\r\n      <CardContent>\r\n        <Typography gutterBottom color='secondary' variant=\"h5\">\r\n          {currencyFormat(product.price)}\r\n        </Typography>\r\n        <Typography variant=\"body2\" color=\"text.secondary\">\r\n        {product.brand} / {product.type}\r\n        </Typography>\r\n      </CardContent>\r\n      <CardActions>\r\n        <LoadingButton\r\n            loading = {status.includes('pendingAddItem' + product.id)} \r\n            onClick={() => dispatch(addBasketItemAsync({productId:product.id}))} \r\n            size=\"small\">Add to cart</LoadingButton>\r\n        <Button component={Link} to={`/catalog/${product.id}`} size=\"small\">View</Button>\r\n      </CardActions>\r\n    </Card>\r\n  );\r\n}\r\n","import {\r\n    Card,\r\n    CardActions,\r\n    CardContent,\r\n    CardHeader,\r\n    Grid,\r\n    Skeleton\r\n} from \"@mui/material\";\r\n\r\nexport default function ProductCardSkeleton() {\r\n    return (\r\n        <Grid item xs component={Card}>\r\n            <CardHeader\r\n                avatar={\r\n                    <Skeleton animation=\"wave\" variant=\"circular\" width={40} height={40} />\r\n                }\r\n                title={\r\n                    <Skeleton\r\n                        animation=\"wave\"\r\n                        height={10}\r\n                        width=\"80%\"\r\n                        style={{ marginBottom: 6 }}\r\n                    />\r\n                }\r\n            />\r\n            <Skeleton sx={{ height: 190 }} animation=\"wave\" variant=\"rectangular\" />\r\n            <CardContent>\r\n                <>\r\n                    <Skeleton animation=\"wave\" height={10} style={{ marginBottom: 6 }} />\r\n                    <Skeleton animation=\"wave\" height={10} width=\"80%\" />\r\n                </>\r\n            </CardContent>\r\n            <CardActions>\r\n                <>\r\n                    <Skeleton animation=\"wave\" height={10} width='40%' />\r\n                    <Skeleton animation=\"wave\" height={10} width=\"20%\" />\r\n                </>\r\n            </CardActions>\r\n        </Grid>\r\n    )\r\n}","import { Grid } from \"@mui/material\";\r\nimport { Product } from \"../../app/models/product\";\r\nimport { useAppSelector } from \"../../app/store/configureStore\";\r\nimport ProductCard from \"./ProductCard\";\r\nimport ProductCardSkeleton from \"./ProductCardSkeleton\";\r\n\r\ninterface Props {\r\n  products: Product[];\r\n}\r\n\r\nexport default function ProductList({ products }: Props) {\r\n  const {productsLoaded} = useAppSelector(state => state.catalog);\r\n  return (\r\n    <>\r\n      <Grid container spacing={4}>\r\n        {products.map((product) => (\r\n          <Grid item xs={4} key={product.id}>\r\n            {!productsLoaded ? (\r\n              <ProductCardSkeleton />\r\n            ) :  (\r\n              <ProductCard  product={product} />\r\n            )}\r\n          </Grid>\r\n        ))}\r\n      </Grid>\r\n    </>\r\n  );\r\n}\r\n","import { debounce, TextField } from \"@mui/material\";\r\nimport { useState } from \"react\";\r\nimport { useAppDispatch, useAppSelector } from \"../../app/store/configureStore\";\r\nimport { setProductParams } from \"./catalogSlice\";\r\n\r\nexport default function ProductSearch() {\r\n    const {productParams} = useAppSelector(state => state.catalog);\r\n    const [searchTerm,setSearchTerm] = useState(productParams.searchTerm);\r\n    const dispatch = useAppDispatch();\r\n\r\n    const debouncedSearch = debounce((event:any) => {\r\n        dispatch(setProductParams({searchTerm : event.target.value}))\r\n    },1000)\r\n\r\n    return(\r\n        <TextField \r\n            label=\"Search Products\"\r\n            variant=\"outlined\" \r\n            fullWidth\r\n            value = {searchTerm || ''}\r\n            onChange = {(event:any) => {\r\n                setSearchTerm(event.target.value);\r\n                debouncedSearch(event);\r\n            }}\r\n         />\r\n    )\r\n}","import {\r\n  Box,\r\n  Checkbox,\r\n  FormControl,\r\n  FormControlLabel,\r\n  FormGroup,\r\n  Grid,\r\n  Pagination,\r\n  Paper,\r\n  Radio,\r\n  RadioGroup,\r\n  Typography,\r\n} from \"@mui/material\";\r\nimport { useState, useEffect } from \"react\";\r\nimport agent from \"../../app/api/agent\";\r\nimport AppPagination from \"../../app/components/AppPagination\";\r\nimport CheckboxButtons from \"../../app/components/CheckboxButtons\";\r\nimport RadioButtonGroup from \"../../app/components/RadioButtonGroup\";\r\nimport LoadingComponent from \"../../app/layout/LoadingComponent\";\r\nimport { useAppDispatch, useAppSelector } from \"../../app/store/configureStore\";\r\nimport {\r\n  fetchFilters,\r\n  fetchProductsAsync,\r\n  productSelectors,\r\n  setPageNumber,\r\n  setProductParams,\r\n} from \"./catalogSlice\";\r\nimport ProductList from \"./ProductList\";\r\nimport ProductSearch from \"./ProductSearch\";\r\n\r\nconst sortOptions = [\r\n  { value: \"name\", label: \"Alphabetical\" },\r\n  { value: \"priceDesc\", label: \"Price - High to Low\" },\r\n  { value: \"price\", label: \"Price - Low to High\" },\r\n];\r\n\r\nexport default function Catalog() {\r\n  const products = useAppSelector(productSelectors.selectAll);\r\n  const { productsLoaded, status, filtersLoaded,brands,types,productParams,metaData } = useAppSelector(\r\n    (state) => state.catalog\r\n  );\r\n  const dispatch = useAppDispatch();\r\n\r\n  useEffect(() => {\r\n    if (!productsLoaded) dispatch(fetchProductsAsync());\r\n  }, [productsLoaded, dispatch]);\r\n\r\n  useEffect(() => {\r\n    if (!filtersLoaded) dispatch(fetchFilters());\r\n  }, [dispatch, filtersLoaded]);\r\n\r\n  if (!filtersLoaded)   return <LoadingComponent message=\"Loading Products...\" />;\r\n\r\n  return (\r\n    <Grid container columnSpacing={4}>\r\n      <Grid item xs={3}>\r\n        <Paper sx={{ mb: 2 }}>\r\n          <ProductSearch />\r\n        </Paper>\r\n        <Paper sx={{ mb: 2, p: 2 }}>\r\n          <RadioButtonGroup\r\n            selectedValue = {productParams.orderBy}\r\n            options = {sortOptions}\r\n            onChange={(e) => dispatch(setProductParams({orderBy : e.target.value}))}\r\n          />\r\n        </Paper>\r\n        <Paper sx={{ mb: 2, p: 2 }}>\r\n         <CheckboxButtons\r\n           items={brands}\r\n           checked = {productParams.brands}\r\n           onChange={(items:string[]) => dispatch(setProductParams({brands : items}))}\r\n         />\r\n        </Paper>\r\n        <Paper sx={{ mb: 2, p: 2 }}>\r\n        <CheckboxButtons\r\n           items={types}\r\n           checked = {productParams.types}\r\n           onChange={(items:string[]) => dispatch(setProductParams({types : items}))}\r\n         />\r\n        </Paper>\r\n      </Grid>\r\n      <Grid item xs={9}>\r\n        <ProductList products={products} />\r\n      </Grid>\r\n      <Grid item xs = {3} />\r\n\r\n      <Grid item xs = {9} sx ={{mb:2}}>\r\n        {metaData && \r\n        <AppPagination\r\n         metaData = {metaData}\r\n         onPageChange = {(page:number) => dispatch(setPageNumber({pageNumber:page}))}\r\n        />\r\n        }\r\n      </Grid>\r\n    </Grid>\r\n  );\r\n}\r\n","import { Button, Container, Divider, Paper, Typography } from \"@mui/material\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\n\r\nexport default function NotFound() {\r\n  return( \r\n  <Container component={Paper} sx={{ height: 400 }}>\r\n      <Typography gutterBottom variant = 'h3'>Oops - we could not find what you are looking for </Typography>\r\n      <Divider />\r\n      <Button fullWidth component={Link} to='/catalog'>Go back to shop</Button>\r\n  </Container> \r\n  )\r\n}\r\n","import { LoadingButton } from \"@mui/lab\";\r\nimport { Divider, Grid, Table, TableBody, TableCell, TableContainer, TableRow, TextField, Typography } from \"@mui/material\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport agent from \"../../app/api/agent\";\r\nimport NotFound from \"../../app/errors/NotFound\";\r\nimport LoadingComponent from \"../../app/layout/LoadingComponent\";\r\nimport { Product } from \"../../app/models/product\";\r\nimport { useAppDispatch, useAppSelector } from \"../../app/store/configureStore\";\r\nimport { addBasketItemAsync, removeBasketItemAsync, setBasket } from \"../basket/basketSlice\";\r\nimport { fetchProductAsync, productSelectors } from \"./catalogSlice\";\r\n\r\nexport default function ProductDetails() {\r\n  const {basket,status} = useAppSelector(state => state.basket);\r\n  const dispatch = useAppDispatch();\r\n  const { id } = useParams<{ id: string }>();\r\n  const product = useAppSelector(state => productSelectors.selectById(state,id));\r\n  const {status:productStatus} = useAppSelector(state => state.catalog);\r\n  const [quantity,setQuantity] = useState(0);\r\n  const item = basket?.items.find(i => i.productId === product?.id);\r\n\r\n  useEffect(() => {\r\n    if(item) setQuantity(item.quantity);\r\n    \r\n    if(!product) dispatch(fetchProductAsync(parseInt(id)));\r\n  }, [id,item,dispatch,product])\r\n\r\n  function handleInputChange(event:any) {\r\n    if(event.target.value >= 0) {\r\n      setQuantity(parseInt(event.target.value));\r\n    }\r\n  }\r\n\r\n  function handleUpdateCart() {\r\n    if(!item || quantity > item.quantity) {\r\n      const updatedQuantity = item ? quantity  - item.quantity : quantity;\r\n      dispatch(addBasketItemAsync({productId:product?.id!,quantity:updatedQuantity}))\r\n    }\r\n    else {\r\n      const updatedQuantity = item.quantity - quantity;\r\n    dispatch(removeBasketItemAsync({productId:product?.id!, quantity:updatedQuantity}))\r\n    }\r\n  }\r\n\r\n  if (productStatus.includes('pending')) return <LoadingComponent message=\"Loading product...\" />;\r\n\r\n  if (!product) return <NotFound />;\r\n\r\n  return (\r\n    <Grid container spacing={6}>\r\n      <Grid item xs={6}>\r\n        <img\r\n          src={product.pictureUrl}\r\n          alt={product.name}\r\n          style={{ width: \"100%\" }}\r\n        />\r\n      </Grid>\r\n      <Grid item xs={6}>\r\n        <Typography variant=\"h3\">{product.name}</Typography>\r\n        <Divider sx={{ mb: 2 }} />\r\n        <Typography variant=\"h4\" color=\"secondary\">\r\n          ${(product.price / 100).toFixed(2)}\r\n        </Typography>\r\n\r\n        <TableContainer>\r\n          <Table>\r\n            <TableBody>\r\n              <TableRow>\r\n                <TableCell>Name</TableCell>\r\n                <TableCell>{product.name}</TableCell>\r\n              </TableRow>\r\n              <TableRow>\r\n                <TableCell>Description</TableCell>\r\n                <TableCell>{product.description}</TableCell>\r\n              </TableRow>\r\n              <TableRow>\r\n                <TableCell>Type</TableCell>\r\n                <TableCell>{product.type}</TableCell>\r\n              </TableRow>\r\n              <TableRow>\r\n                <TableCell>Brand</TableCell>\r\n                <TableCell>{product.brand}</TableCell>\r\n              </TableRow>\r\n              <TableRow>\r\n                <TableCell>Quantity in stock</TableCell>\r\n                <TableCell>{product.quantityInStock}</TableCell>\r\n              </TableRow>\r\n            </TableBody>\r\n          </Table>\r\n        </TableContainer>\r\n        <Grid container spacing={2}>\r\n            <Grid item xs={6}>\r\n              <TextField\r\n                  onChange={handleInputChange}\r\n                  variant = 'outlined'\r\n                  type='number'\r\n                  label='Quantity in cart'\r\n                  fullWidth\r\n                  value={quantity}\r\n               />\r\n            </Grid>\r\n            <Grid item xs={6}>\r\n              <LoadingButton\r\n              disabled = {item?.quantity === quantity || !item && quantity === 0}\r\n              loading={status.includes('pending')}\r\n              onClick={handleUpdateCart}\r\n                sx={{height:'55px'}}\r\n                color='primary'\r\n                size='large'\r\n                variant='contained'\r\n                fullWidth\r\n              >\r\n                {item ? 'Update quantity' : 'Add to cart'}\r\n              </LoadingButton>\r\n            </Grid>\r\n        </Grid>\r\n      </Grid>\r\n    </Grid>\r\n  );\r\n}\r\n","import { Button, ButtonGroup, Typography } from \"@mui/material\";\r\nimport { useAppDispatch, useAppSelector } from \"../../app/store/configureStore\";\r\nimport { decrement, increment } from \"./CounterSlice\";\r\n\r\nexport default function ContactPage() {\r\n  const dispatch = useAppDispatch();\r\n  const { data, title } = useAppSelector(state => state.counter);\r\n  return (\r\n    <>\r\n      <Typography variant=\"h2\">{title}</Typography>\r\n\r\n      <Typography variant=\"h5\">The Data is :{data}</Typography>\r\n\r\n      <ButtonGroup>\r\n          <Button onClick={() => dispatch(decrement(1))} variant ='contained' color='error'>Decrement</Button>\r\n          <Button onClick={() => dispatch(increment(1))}  variant ='contained' color='primary'>Increment</Button>\r\n          <Button onClick={() => dispatch(increment(5))}  variant ='contained' color='secondary'>Increment by 5</Button>\r\n\r\n      </ButtonGroup>\r\n    </>\r\n  );\r\n}\r\n","import { Box, Typography } from \"@mui/material\";\r\nimport Slider from \"react-slick\";\r\n\r\nexport default function HomePage() {\r\n    const settings = {\r\n        dots: true,\r\n        infinite: true,\r\n        speed: 500,\r\n        slidesToShow: 1,\r\n        slidesToScroll: 1\r\n      };\r\n    return (\r\n        <>\r\n            <Slider {...settings}>\r\n                <div>\r\n                    <img src=\"/images/hero1.jpg\" alt=\"hero\" style={{display:'block',width:'100%',maxHeight:500}} />\r\n                </div>\r\n                <div>\r\n                    <img src=\"/images/hero2.jpg\" alt=\"hero\" style={{display:'block',width:'100%',maxHeight:500}} />\r\n                </div>\r\n                <div>\r\n                    <img src=\"/images/hero3.jpg\" alt=\"hero\" style={{display:'block',width:'100%',maxHeight:500}} />\r\n                </div>\r\n            </Slider>\r\n\r\n            <Box display='flex' justifyContent='center' sx={{p:4}}>\r\n                <Typography variant='h1'>\r\n                    Welcome to the shop!\r\n                </Typography>\r\n            </Box>\r\n        </>\r\n    )\r\n}","import { Button, Menu, MenuItem } from \"@mui/material\";\r\nimport React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { signOut } from \"../../features/account/accountSlice\";\r\nimport { clearBasket } from \"../../features/basket/basketSlice\";\r\nimport { useAppDispatch, useAppSelector } from \"../store/configureStore\";\r\n\r\nexport default function SignedInMenu() {\r\n    const dispatch = useAppDispatch();\r\n    const {user} = useAppSelector(state => state.account);\r\n    const [anchorEl, setAnchorEl] = React.useState(null);\r\n    const open = Boolean(anchorEl);\r\n    const handleClick = (event :any) => {\r\n      setAnchorEl(event.currentTarget);\r\n    };\r\n    const handleClose = () => {\r\n      setAnchorEl(null);\r\n    };\r\n  \r\n    return (\r\n      <>\r\n        <Button \r\n            color = 'inherit'\r\n            onClick={handleClick}\r\n            sx = {{typography: 'h6'}}\r\n        >\r\n          {user?.email}\r\n        </Button>\r\n        <Menu\r\n          anchorEl={anchorEl}\r\n          open={open}\r\n          onClose={handleClose}\r\n        >\r\n          <MenuItem onClick={handleClose}>Profile</MenuItem>\r\n          <MenuItem component={Link} to = '/orders'>My orders</MenuItem>\r\n          <MenuItem onClick={() => {\r\n              dispatch(signOut())\r\n              dispatch(clearBasket())\r\n          }}>Logout</MenuItem>\r\n        </Menu>\r\n      </>\r\n    );\r\n}","import { ShoppingCart } from \"@mui/icons-material\";\r\nimport {\r\n  AppBar,\r\n  Badge,\r\n  Box,\r\n  IconButton,\r\n  List,\r\n  ListItem,\r\n  Switch,\r\n  Toolbar,\r\n  Typography,\r\n} from \"@mui/material\";\r\nimport { Link, NavLink } from \"react-router-dom\";\r\nimport { useStoreContext } from \"../context/StoreContext\";\r\nimport { useAppSelector } from \"../store/configureStore\";\r\nimport SignedInMenu from \"./SignedInMenu\";\r\n\r\ninterface Props {\r\n  darkMode: boolean;\r\n  handleThemeChange: () => void;\r\n}\r\n\r\nconst midLinks = [\r\n  { title: \"catalog\", path: \"/catalog\" },\r\n  { title: \"about\", path: \"/about\" },\r\n  { title: \"contact\", path: \"/contact\" },\r\n];\r\n\r\nconst rightLinks = [\r\n  { title: \"login\", path: \"/login\" },\r\n  { title: \"register\", path: \"/register\" },\r\n];\r\n\r\nconst navStyles = {\r\n  color: \"inherit\",\r\n  textDecoration: \"none\",\r\n  typography: \"h6\",\r\n  \"&:hover\": {\r\n    color: \"grey.500\",\r\n  },\r\n  \"&.active\": {\r\n    color: \"text.secondary\",\r\n  },\r\n};\r\n\r\nexport default function Header({ darkMode, handleThemeChange }: Props) {\r\n\r\nconst {basket} = useAppSelector(state => state.basket);\r\nconst {user} =  useAppSelector(state => state.account);\r\nconst itemCount = basket?.items.reduce((sum,item) => sum + item.quantity,0);\r\n\r\n  return (\r\n    <AppBar position=\"static\">\r\n      <Toolbar\r\n        sx={{\r\n          display: \"flex\",\r\n          justifyContent: \"space-between\",\r\n          alignItems: \"center\",\r\n        }}\r\n      >\r\n        <Box display='flex' alignItems='center'>\r\n          <Typography variant=\"h6\" component={NavLink} to=\"/\" exact sx={navStyles}>\r\n            E-Commerce\r\n          </Typography>\r\n          <Switch checked={darkMode} onChange={handleThemeChange} />\r\n        </Box>\r\n\r\n        <List sx={{ display: \"flex\" }}>\r\n          {midLinks.map(({ title, path }) => (\r\n            <ListItem component={NavLink} to={path} key={path} sx={navStyles}>\r\n              {title.toUpperCase()}\r\n            </ListItem>\r\n          ))}\r\n        </List>\r\n\r\n        <Box display='flex' alignItems='center'>\r\n          <IconButton component = {Link} to='/basket' size=\"large\" sx={{ color: \"inherit\" }}>\r\n            <Badge badgeContent={itemCount} color=\"secondary\">\r\n              <ShoppingCart />\r\n            </Badge>\r\n          </IconButton>\r\n          {user ? (\r\n              <SignedInMenu />\r\n          ) : (\r\n            <List sx={{ display: \"flex\" }}>\r\n            {rightLinks.map(({ title, path }) => (\r\n              <ListItem component={NavLink} to={path} key={path} sx={navStyles}>\r\n                {title.toUpperCase()}\r\n              </ListItem>\r\n            ))}\r\n          </List>\r\n          )}\r\n         \r\n        </Box>\r\n      </Toolbar>\r\n    </AppBar>\r\n  );\r\n}\r\n","import { Container, Divider, Paper, Typography } from \"@mui/material\";\r\nimport { useLocation,useHistory } from \"react-router-dom\";\r\n\r\nexport default function ServerError() {\r\n    const history = useHistory();\r\n    const {state} = useLocation<any>();\r\n    return (\r\n        <Container component ={Paper}>\r\n            {state?.error ?  (\r\n                    <>\r\n                    <Typography variant = 'h5' gutterBottom>Server Error</Typography>\r\n                    <Divider />\r\n                    <Typography>{state.error.detail || 'Internal Server Error'}</Typography>\r\n                    </>\r\n            ) : (\r\n                <Typography variant = 'h5' gutterBottom>Server Error</Typography>\r\n            )}\r\n        </Container>\r\n    )\r\n}","import { TableContainer, Paper, Table, TableBody, TableRow, TableCell } from \"@mui/material\";\r\nimport { useStoreContext } from \"../../app/context/StoreContext\";\r\nimport { useAppSelector } from \"../../app/store/configureStore\";\r\nimport { currencyFormat } from \"../../app/util/util\";\r\n\r\ninterface Props {\r\n    subtotal? : number;\r\n}\r\n\r\n\r\nexport default function BasketSummary({subtotal} : Props) {\r\n    const {basket} = useAppSelector(state => state.basket);\r\n    if(subtotal === undefined)\r\n         subtotal = basket?.items.reduce((sum,item) => sum + (item.quantity * item.price),0) ?? 0;\r\n    const deliveryFee = subtotal > 10000 ? 0 : 500;\r\n\r\n\r\n    return (\r\n        <>\r\n            <TableContainer component={Paper} variant={'outlined'}>\r\n                <Table>\r\n                    <TableBody>\r\n                        <TableRow>\r\n                            <TableCell colSpan={2}>Subtotal</TableCell>\r\n                            <TableCell align=\"right\">{currencyFormat(subtotal)}</TableCell>\r\n                        </TableRow>\r\n                        <TableRow>\r\n                            <TableCell colSpan={2}>Delivery fee*</TableCell>\r\n                            <TableCell align=\"right\">{currencyFormat(deliveryFee)}</TableCell>\r\n                        </TableRow>\r\n                        <TableRow>\r\n                            <TableCell colSpan={2}>Total</TableCell>\r\n                            <TableCell align=\"right\">{currencyFormat(subtotal + deliveryFee)}</TableCell>\r\n                        </TableRow>\r\n                        <TableRow>\r\n                            <TableCell>\r\n                                <span style={{fontStyle: 'italic'}}>*Orders over $100 qualify for free delivery</span>\r\n                            </TableCell>\r\n                        </TableRow>\r\n                    </TableBody>\r\n                </Table>\r\n            </TableContainer>\r\n        </>\r\n    )\r\n}","import { Remove, Add, Delete } from \"@mui/icons-material\";\r\nimport { LoadingButton } from \"@mui/lab\";\r\nimport { TableContainer, Paper, Table, TableHead, TableRow, TableCell, TableBody, Box } from \"@mui/material\";\r\nimport { BasketItem } from \"../../app/models/basket\";\r\nimport { useAppSelector, useAppDispatch } from \"../../app/store/configureStore\";\r\nimport { removeBasketItemAsync, addBasketItemAsync } from \"./basketSlice\";\r\n\r\n\r\ninterface Props {\r\n    items:BasketItem[];\r\n    isBasket?:boolean;\r\n}\r\n\r\nexport default function BasketTable({items,isBasket= true} : Props) {\r\n    const {status } = useAppSelector(state => state.basket);\r\n    const dispatch = useAppDispatch();\r\n    return (\r\n        <TableContainer component={Paper}>\r\n        <Table sx={{ minWidth: 650 }}>\r\n          <TableHead>\r\n            <TableRow>\r\n              <TableCell>Product</TableCell>\r\n              <TableCell align=\"right\">Price</TableCell>\r\n              <TableCell align=\"center\">Quantity</TableCell>\r\n              <TableCell align=\"right\">SubTotal</TableCell>\r\n              {isBasket && \r\n              <TableCell align=\"right\"></TableCell>}\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            {items.map((item) => (\r\n              <TableRow\r\n                key={item.productId}\r\n                sx={{ \"&:last-child td, &:last-child th\": { border: 0 } }}\r\n              >\r\n                <TableCell component=\"th\" scope=\"row\">\r\n                  <Box display=\"flex\" alignItems=\"center\">\r\n                    <img\r\n                      src={item.pictureUrl}\r\n                      alt={item.name}\r\n                      style={{ height: 50, marginRight: 20 }}\r\n                    />\r\n                    <span>{item.name}</span>\r\n                  </Box>\r\n                </TableCell>\r\n                <TableCell align=\"right\">\r\n                  ${(item.price / 100).toFixed(2)}\r\n                </TableCell>\r\n                <TableCell align=\"center\">\r\n                {isBasket && \r\n                  <LoadingButton\r\n                    loading={\r\n                      status === 'pendingRemoveItem' + item.productId + 'rem'}\r\n                      onClick={() => dispatch(removeBasketItemAsync({productId:item.productId,quantity:1,name:'rem'}))} \r\n                    color=\"error\"                   \r\n                  >\r\n                    <Remove />\r\n                  </LoadingButton> }\r\n                  {item.quantity}\r\n                  {isBasket && \r\n                  <LoadingButton\r\n                    loading={\r\n                      status === 'pendingAddItem' + item.productId\r\n                    }\r\n                    onClick={() =>\r\n                     dispatch(addBasketItemAsync({productId:item.productId}))\r\n                    }\r\n                    color=\"secondary\"\r\n                  >\r\n                    <Add />\r\n                  </LoadingButton> }\r\n                </TableCell>\r\n                <TableCell align=\"right\">\r\n                  ${((item.price / 100) * item.quantity).toFixed(2)}\r\n                </TableCell>\r\n               {isBasket && \r\n                <TableCell align=\"right\">\r\n                  <LoadingButton\r\n                    loading={\r\n                      status === 'pendingRemoveItem' + item.productId + 'del'\r\n                    }\r\n                    onClick={() => dispatch(removeBasketItemAsync({productId:item.productId,quantity:item.quantity,name: 'del'}))} \r\n                    color=\"error\"\r\n                  >\r\n                    <Delete />\r\n                  </LoadingButton> \r\n                </TableCell> }\r\n              </TableRow>\r\n            ))}\r\n          </TableBody>\r\n        </Table>\r\n      </TableContainer>\r\n    )\r\n}","import {\r\n  Button,\r\n  Grid,\r\n  Typography,\r\n} from \"@mui/material\";\r\nimport BasketSummary from \"./BasketSummary\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { useAppDispatch, useAppSelector } from \"../../app/store/configureStore\";\r\nimport BasketTable from \"./BasketTable\";\r\n\r\nexport default function BasketPage() {\r\n  const { basket } = useAppSelector(state => state.basket);\r\n  const dispatch = useAppDispatch();\r\n \r\n  if (!basket)\r\n    return <Typography variant=\"h3\">Your basket is empty</Typography>;\r\n  return (\r\n    <>\r\n      <BasketTable items={basket.items} />\r\n      <Grid container>\r\n            <Grid item xs={6} />\r\n            <Grid item xs ={6}>\r\n                <BasketSummary />\r\n                <Button\r\n                  component ={Link}\r\n                  to='/checkout'\r\n                  variant='contained'\r\n                  size='large'\r\n                  fullWidth\r\n                >\r\n                  Checkout\r\n                </Button>\r\n            </Grid>\r\n      </Grid>\r\n    </>\r\n  );\r\n}\r\n","import { TextField } from \"@mui/material\";\r\nimport { useController, UseControllerProps } from \"react-hook-form\";\r\n\r\ninterface Props extends UseControllerProps {\r\n    label :string;\r\n\r\n}\r\n\r\nexport default function AppTextInput(props:Props) {\r\n\r\n    const {fieldState,field} = useController({...props , defaultValue : ''});\r\n    return (\r\n        <TextField \r\n            {...props}\r\n            {...field}\r\n            fullWidth\r\n            variant = 'outlined'\r\n            error = {!!fieldState.error}\r\n            helperText = {fieldState.error?.message}\r\n\r\n        />\r\n    )\r\n}","import { Checkbox, FormControlLabel } from \"@mui/material\";\r\nimport { useController, UseControllerProps } from \"react-hook-form\";\r\n\r\ninterface Props extends UseControllerProps {\r\n    label: string;\r\n    disabled:boolean;\r\n}\r\n\r\nexport default function AppCheckbox(props : Props) {\r\n    const {field} = useController({...props, defaultValue:false});\r\n\r\n\r\n    return (\r\n        <FormControlLabel\r\n            control={\r\n                <Checkbox\r\n                  {...field}\r\n                  checked ={field.value}\r\n                  color= 'secondary'\r\n                  disabled = {props.disabled}\r\n                />\r\n            }\r\n\r\n            label = {props.label}\r\n        />\r\n    )\r\n}","import Grid from \"@mui/material/Grid\";\r\nimport Typography from \"@mui/material/Typography\";\r\nimport { useFormContext } from \"react-hook-form\";\r\nimport AppTextInput from \"../../app/components/AppTextInput\";\r\nimport AppCheckbox from \"../../app/components/AppCheckbox\";\r\n\r\nexport default function AddressForm() {\r\n  const { control,formState } = useFormContext();\r\n  return (\r\n    <>\r\n      <Typography variant=\"h6\" gutterBottom>\r\n        Shipping address\r\n      </Typography>\r\n        <Grid container spacing={3}>\r\n          <Grid item xs={12} sm={12}>\r\n            <AppTextInput control={control} name=\"fullName\" label=\"Full Name\" />\r\n          </Grid>\r\n\r\n          <Grid item xs={12}>\r\n            <AppTextInput control={control} name=\"address1\" label=\"Address 1\" />\r\n          </Grid>\r\n          <Grid item xs={12}>\r\n            <AppTextInput control={control} name=\"address2\" label=\"Address 2\" />\r\n          </Grid>\r\n          <Grid item xs={12} sm={6}>\r\n            <AppTextInput control={control} name=\"city\" label=\"City\" />\r\n          </Grid>\r\n          <Grid item xs={12} sm={6}>\r\n            <AppTextInput control={control} name=\"state\" label=\"State\" />\r\n          </Grid>\r\n          <Grid item xs={12} sm={6}>\r\n            <AppTextInput control={control} name=\"zip\" label=\"Zipcode\" />\r\n          </Grid>\r\n          <Grid item xs={12} sm={6}>\r\n            <AppTextInput control={control} name=\"country\" label=\"Country\" />\r\n          </Grid>\r\n          <Grid item xs={12}>\r\n                <AppCheckbox \r\n                 disabled ={!formState.isDirty}\r\n                 name= 'saveAddress' \r\n                 label ='Save this as the default address' \r\n                 control ={control}/>\r\n          </Grid>\r\n        </Grid>\r\n            \r\n    </>\r\n  );\r\n}\r\n","import Typography from '@mui/material/Typography';\r\nimport Grid from '@mui/material/Grid';\r\nimport TextField from '@mui/material/TextField';\r\nimport FormControlLabel from '@mui/material/FormControlLabel';\r\nimport Checkbox from '@mui/material/Checkbox';\r\nimport { useFormContext } from 'react-hook-form';\r\nimport AppTextInput from '../../app/components/AppTextInput';\r\n\r\nexport default function PaymentForm() {\r\n\r\n    const {control} = useFormContext();\r\n  return (\r\n    <>\r\n      <Typography variant=\"h6\" gutterBottom>\r\n        Payment method\r\n      </Typography>\r\n      <Grid container spacing={3}>\r\n        <Grid item xs={12} md={6}>\r\n        <AppTextInput name='nameOnCard' label='Name on card' control={control} />\r\n        </Grid>\r\n        <Grid item xs={12} md={6}>\r\n          <TextField\r\n            //required\r\n            id=\"cardNumber\"\r\n            label=\"Card number\"\r\n            fullWidth\r\n            autoComplete=\"cc-number\"\r\n            variant=\"standard\"\r\n          />\r\n        </Grid>\r\n        <Grid item xs={12} md={6}>\r\n          <TextField\r\n            //required\r\n            id=\"expDate\"\r\n            label=\"Expiry date\"\r\n            fullWidth\r\n            autoComplete=\"cc-exp\"\r\n            variant=\"standard\"\r\n          />\r\n        </Grid>\r\n        <Grid item xs={12} md={6}>\r\n          <TextField\r\n            //required\r\n            id=\"cvv\"\r\n            label=\"CVV\"\r\n            helperText=\"Last three digits on signature strip\"\r\n            fullWidth\r\n            autoComplete=\"cc-csc\"\r\n            variant=\"standard\"\r\n          />\r\n        </Grid>\r\n        <Grid item xs={12}>\r\n          <FormControlLabel\r\n            control={<Checkbox color=\"secondary\" name=\"saveCard\" value=\"yes\" />}\r\n            label=\"Remember credit card details for next time\"\r\n          />\r\n        </Grid>\r\n      </Grid>\r\n    </>\r\n  );\r\n}","import { Grid } from '@mui/material';\r\nimport Typography from '@mui/material/Typography';\r\nimport { useAppSelector } from '../../app/store/configureStore';\r\nimport BasketSummary from '../basket/BasketSummary';\r\nimport BasketTable from '../basket/BasketTable';\r\n\r\n\r\nexport default function Review() {\r\n    const {basket} = useAppSelector(state => state.basket);\r\n  return (\r\n    <>\r\n      <Typography variant=\"h6\" gutterBottom>\r\n        Order summary\r\n      </Typography>\r\n        {basket &&\r\n      <BasketTable items={basket.items} isBasket ={false} /> }\r\n      <Grid container>\r\n            <Grid item xs={6} />\r\n            <Grid item xs ={6}>\r\n                <BasketSummary />\r\n                \r\n            </Grid>\r\n      </Grid>\r\n    </>\r\n  );\r\n}","import * as yup from 'yup';\r\n\r\nexport const validationSchema = [\r\n\r\n    //1st step - Address Form\r\n yup.object({\r\n    fullName : yup.string().required('full name is required'),\r\n    address1 : yup.string().required('Address line 1 is required'),\r\n    address2 : yup.string().required('Address line 2 is required'),\r\n    city : yup.string().required(),\r\n    state : yup.string().required(),\r\n    zip : yup.string().required(),\r\n    country : yup.string().required()\r\n}),\r\n\r\n    // 2ndStep - Review Form\r\nyup.object(),\r\n\r\n\r\n    //3rd Step -- Payment Form\r\nyup.object({\r\n        nameOnCard : yup.string().required()\r\n})\r\n\r\n]\r\n","import {\r\n  Box,\r\n  Button,\r\n  Paper,\r\n  Step,\r\n  StepLabel,\r\n  Stepper,\r\n  Typography,\r\n} from \"@mui/material\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { FieldValues, FormProvider, useForm } from \"react-hook-form\";\r\nimport AddressForm from \"./AddressForm\";\r\nimport PaymentForm from \"./PaymentForm\";\r\nimport Review from \"./Review\";\r\nimport { yupResolver } from '@hookform/resolvers/yup';\r\nimport { validationSchema } from \"./checkoutValidation\";\r\nimport agent from \"../../app/api/agent\";\r\nimport { clearBasket } from \"../basket/basketSlice\";\r\nimport { useAppDispatch } from \"../../app/store/configureStore\";\r\nimport { LoadingButton } from \"@mui/lab\";\r\n\r\nconst steps = [\"Shipping address\", \"Review your order\", \"Payment details\"];\r\n\r\nfunction getStepContent(step: number) {\r\n  switch (step) {\r\n    case 0:\r\n      return <AddressForm />;\r\n    case 1:\r\n      return <Review />;\r\n    case 2:\r\n      return <PaymentForm />;\r\n    default:\r\n      throw new Error(\"Unknown step\");\r\n  }\r\n}\r\n\r\nexport default function CheckoutPage() {\r\n  \r\n  const [activeStep, setActiveStep] = useState(0);\r\n  const [orderNumber,setOrderNumber] = useState(0);\r\n  const [loading,setLoading] = useState(false);\r\n  const dispatch = useAppDispatch();\r\n\r\n  const currentValidationSchema = validationSchema[activeStep];\r\n\r\n  const methods = useForm({\r\n    mode :'all',\r\n    resolver:yupResolver(currentValidationSchema)\r\n});\r\n\r\nuseEffect(() => {\r\n    agent.Account.fetchAddress()\r\n      .then(response => {\r\n          if(response) {\r\n            methods.reset({...methods.getValues(), ...response, saveAddress:false});\r\n          }\r\n      });\r\n},[methods]);\r\n\r\n  const handleNext = async (data : FieldValues) => {\r\n    const {nameOnCard,saveAddress, ...shippingAddress} = data; //fetch saved Address\r\n    if(activeStep === steps.length - 1) {\r\n      setLoading(true);\r\n      try {\r\n          const orderNumber = await agent.Orders.create({saveAddress,shippingAddress});\r\n          setOrderNumber(orderNumber);\r\n          setActiveStep(activeStep + 1);\r\n          dispatch(clearBasket());\r\n          setLoading(false);\r\n      }\r\n      catch(error) {\r\n        console.log(error);\r\n        setLoading(false);\r\n      }\r\n    } else {\r\n      setActiveStep(activeStep + 1);\r\n    }\r\n    \r\n  };\r\n\r\n  const handleBack = () => {\r\n    setActiveStep(activeStep - 1);\r\n  };\r\n\r\n  return (\r\n    <FormProvider {...methods}>\r\n      <Paper\r\n        variant=\"outlined\"\r\n        sx={{ my: { xs: 3, md: 6 }, p: { xs: 2, md: 3 } }}\r\n      >\r\n        <Typography component=\"h1\" variant=\"h4\" align=\"center\">\r\n          Checkout\r\n        </Typography>\r\n        <Stepper activeStep={activeStep} sx={{ pt: 3, pb: 5 }}>\r\n          {steps.map((label) => (\r\n            <Step key={label}>\r\n              <StepLabel>{label}</StepLabel>\r\n            </Step>\r\n          ))}\r\n        </Stepper>\r\n        <>\r\n          {activeStep === steps.length ? (\r\n            <>\r\n              <Typography variant=\"h5\" gutterBottom>\r\n                Thank you for your order.\r\n              </Typography>\r\n              <Typography variant=\"subtitle1\">\r\n                Your order number is #{orderNumber}. We have not  emailed your order\r\n                confirmation, and will not send you an update when your order has\r\n                shipped as this is a fake store!.\r\n              </Typography>\r\n            </>\r\n          ) : (\r\n            <form onSubmit= {methods.handleSubmit(handleNext)}>\r\n              {getStepContent(activeStep)}\r\n              <Box sx={{ display: \"flex\", justifyContent: \"flex-end\" }}>\r\n                {activeStep !== 0 && (\r\n                  <Button onClick={handleBack} sx={{ mt: 3, ml: 1 }}>\r\n                    Back\r\n                  </Button>\r\n                )}\r\n                <LoadingButton\r\n                  loading = {loading}\r\n                  disabled = {!methods.formState.isValid}\r\n                  variant=\"contained\"\r\n                  type='submit'\r\n                  sx={{ mt: 3, ml: 1 }}\r\n                >\r\n                  {activeStep === steps.length - 1 ? \"Place order\" : \"Next\"}\r\n                </LoadingButton>\r\n              </Box>\r\n            </form>\r\n          )}\r\n        </>\r\n      </Paper>\r\n    </FormProvider>\r\n  );\r\n}\r\n","import Avatar from '@mui/material/Avatar';\r\nimport TextField from '@mui/material/TextField';\r\nimport Grid from '@mui/material/Grid';\r\nimport Box from '@mui/material/Box';\r\nimport LockOutlinedIcon from '@mui/icons-material/LockOutlined';\r\nimport Typography from '@mui/material/Typography';\r\nimport Container from '@mui/material/Container';\r\nimport { Paper } from '@mui/material';\r\nimport { Link, useHistory, useLocation } from 'react-router-dom';\r\nimport agent from '../../app/api/agent';\r\nimport {FieldValues, useForm} from 'react-hook-form';\r\nimport { LoadingButton } from '@mui/lab';\r\nimport { useAppDispatch } from '../../app/store/configureStore';\r\nimport { signInUser } from './accountSlice';\r\n\r\nexport default function Login() {\r\n\r\n    const history = useHistory();\r\n    const location = useLocation<any>();\r\n    const dispatch = useAppDispatch();\r\n    const {register,handleSubmit,formState:{isSubmitting,errors,isValid}} = useForm({\r\n        mode:'all',\r\n\r\n    });\r\n\r\n\r\n    async function submitForm(data:FieldValues) {\r\n      try {\r\n        await dispatch(signInUser(data));\r\n        history.push(location.state?.from?.pathname || '/catalog');\r\n      } \r\n      catch(error:any) {\r\n          console.log(error);\r\n      } \r\n    }\r\n\r\n  return (\r\n      <Container component={Paper} maxWidth=\"sm\"\r\n        sx={{display:'flex',flexDirection:'column',alignItems:'center',p:4}}>\r\n          <Avatar sx={{ m: 1, bgcolor: 'secondary.main' }}>\r\n            <LockOutlinedIcon />\r\n          </Avatar>\r\n          <Typography component=\"h1\" variant=\"h5\">\r\n            Sign in\r\n          </Typography>\r\n          <Box component=\"form\" onSubmit={handleSubmit(submitForm)} noValidate sx={{ mt: 1 }}>\r\n            <TextField\r\n              margin=\"normal\"\r\n              fullWidth\r\n              label=\"Username\"\r\n              autoFocus\r\n             {...register('username',{required:'Username is required'})}\r\n             error={!!errors.username}\r\n             helperText = {errors?.username?.message}\r\n            />\r\n            <TextField\r\n              margin=\"normal\"\r\n              fullWidth\r\n              label=\"Password\"\r\n              type=\"password\"\r\n              {...register('password',{required:'Password is required'})}\r\n              error={!!errors.password}\r\n              helperText = {errors?.password?.message}\r\n            />\r\n            <LoadingButton\r\n            loading = {isSubmitting}\r\n              disabled={!isValid}\r\n              type=\"submit\"\r\n              fullWidth\r\n              variant=\"contained\"\r\n              sx={{ mt: 3, mb: 2 }}\r\n            >\r\n              Sign In\r\n            </LoadingButton>\r\n            <Grid container>\r\n              <Grid item>\r\n                <Link to='/register'>\r\n                  {\"Don't have an account? Sign Up\"}\r\n                </Link>\r\n              </Grid>\r\n            </Grid>\r\n          </Box>\r\n      </Container>\r\n  );\r\n}","import Avatar from '@mui/material/Avatar';\r\nimport TextField from '@mui/material/TextField';\r\nimport Grid from '@mui/material/Grid';\r\nimport Box from '@mui/material/Box';\r\nimport LockOutlinedIcon from '@mui/icons-material/LockOutlined';\r\nimport Typography from '@mui/material/Typography';\r\nimport Container from '@mui/material/Container';\r\nimport { Paper } from '@mui/material';\r\nimport { Link, useHistory } from 'react-router-dom';\r\nimport agent from '../../app/api/agent';\r\nimport {useForm} from 'react-hook-form';\r\nimport { LoadingButton } from '@mui/lab';\r\nimport { toast } from 'react-toastify';\r\n\r\nexport default function Register() {\r\n\r\n    const history = useHistory();\r\n    const {register,handleSubmit,setError,formState:{isSubmitting,errors,isValid}} = useForm({\r\n        mode:'all',\r\n\r\n    });\r\n\r\n    function handleApiErrors(errors : any) {\r\n       if(errors) {\r\n           errors.forEach((error:string) => {\r\n                if(error.includes('Password')) {\r\n                    setError('password',{message : error});\r\n                } else if(error.includes('Email')) {\r\n                    setError('email',{message: error});\r\n                } else if(error.includes('Username')) {\r\n                    setError('username',{message:error});\r\n                }\r\n           });\r\n       }\r\n    }\r\n\r\n  return (\r\n      <Container component={Paper} maxWidth=\"sm\"\r\n        sx={{display:'flex',flexDirection:'column',alignItems:'center',p:4}}>\r\n          <Avatar sx={{ m: 1, bgcolor: 'secondary.main' }}>\r\n            <LockOutlinedIcon />\r\n          </Avatar>\r\n          <Typography component=\"h1\" variant=\"h5\">\r\n            Register\r\n          </Typography>\r\n          <Box component=\"form\" \r\n                onSubmit={handleSubmit((data) => \r\n                    agent.Account.register(data)\r\n                    .then(() => {\r\n                        toast.success('Registration successfull - you can now login');\r\n                        history.push('/login');\r\n                    })\r\n                    .catch(error => handleApiErrors(error)))} noValidate sx={{ mt: 1 }}>\r\n            <TextField\r\n              margin=\"normal\"\r\n              fullWidth\r\n              label=\"Username\"\r\n              autoFocus\r\n             {...register('username',{required:'Username is required'})}\r\n             error={!!errors.username}\r\n             helperText = {errors?.username?.message}\r\n            />\r\n             <TextField\r\n              margin=\"normal\"\r\n              fullWidth\r\n              label=\"Email Address\"\r\n             {...register('email',{\r\n                 required:'Email is required',\r\n                 pattern : {\r\n                     value : /^\\w+[\\w-\\.]*\\@\\w+((-\\w+)|(\\w*))\\.[a-z]{2,3}$/,\r\n                     message : 'Not a valid email address'\r\n                 }\r\n                    \r\n            })}\r\n             error={!!errors.email}\r\n             helperText = {errors?.email?.message}\r\n            />\r\n            <TextField\r\n              margin=\"normal\"\r\n              fullWidth\r\n              label=\"Password\"\r\n              type=\"password\"\r\n              {...register('password',{\r\n                  required:'Password is required',\r\n                  pattern :{\r\n                      value: /(?=^.{6,10}$)(?=.*\\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[!@#$%^&amp;*()_+}{&quot;:;'?/&gt;.&lt;,])(?!.*\\s).*$/,\r\n                      message : 'password does not meet  complexity requirements'\r\n                  }\r\n                \r\n                })}\r\n              error={!!errors.password}\r\n              helperText = {errors?.password?.message}\r\n            />\r\n\r\n            <LoadingButton\r\n            loading = {isSubmitting}\r\n              disabled={!isValid}\r\n              type=\"submit\"\r\n              fullWidth\r\n              variant=\"contained\"\r\n              sx={{ mt: 3, mb: 2 }}\r\n            >\r\n              Register\r\n            </LoadingButton>\r\n            <Grid container>\r\n              <Grid item>\r\n                <Link to='/login'>\r\n                  {\"Already have an account? Sign In\"}\r\n                </Link>\r\n              </Grid>\r\n            </Grid>\r\n          </Box>\r\n      </Container>\r\n  );\r\n}","import { ComponentType } from \"react\";\r\nimport { Redirect, Route, RouteComponentProps, RouteProps } from \"react-router-dom\";\r\nimport { useAppSelector } from \"../store/configureStore\";\r\n\r\ninterface Props extends RouteProps {\r\n    component: ComponentType<RouteComponentProps<any>> | ComponentType<any>;\r\n}\r\n\r\nexport default function PrivateRoute({ component : Component, ...rest } : Props) {\r\n    const {user} = useAppSelector(state => state.account);\r\n    return (\r\n      <Route\r\n        {...rest}\r\n        render={props =>\r\n          user ? (\r\n            <Component {...props} />\r\n          ) : (\r\n            <Redirect\r\n              to={{\r\n                pathname: \"/login\",\r\n                state: { from: props.location }\r\n              }}\r\n            />\r\n          )\r\n        }\r\n      />\r\n    );\r\n  }","import { Box, Button, Grid, Typography } from \"@mui/material\";\r\nimport { BasketItem } from \"../../app/models/basket\";\r\nimport { Order } from \"../../app/models/order\";\r\nimport BasketSummary from \"../basket/BasketSummary\";\r\nimport BasketTable from \"../basket/BasketTable\";\r\n\r\ninterface Props {\r\n    order:Order;\r\n    setSelectedOrder : (id:number) => void\r\n}\r\nexport default function OrderDetailed ({order,setSelectedOrder} : Props) {\r\n    const subtotal = order.orderItems.reduce((sum,item) => sum + (item.quantity * item.price),0) ?? 0;\r\n    return (\r\n        <>\r\n            <Box display='flex'  justifyContent='space-between'>\r\n                <Typography sx= {{ p:2 }} gutterBottom variant='h4'> Order# {order.id} - {order.orderStatus} </Typography>\r\n                <Button onClick={() => setSelectedOrder(0)} sx={{m:2}} size='large' variant='contained'>Back to Orders</Button>\r\n            </Box>\r\n            <BasketTable items={order.orderItems as BasketItem[]} isBasket={false}  />\r\n\r\n            <Grid container>\r\n                <Grid item xs={6} />\r\n                <Grid item xs={6} >\r\n                    <BasketSummary subtotal={subtotal} />\r\n                </Grid>\r\n            </Grid>\r\n        </>\r\n    )\r\n}","import { TableContainer, Paper, Table, TableHead, TableRow, TableCell, TableBody, Button } from \"@mui/material\";\r\nimport { useState, useEffect } from \"react\";\r\nimport agent from \"../../app/api/agent\";\r\nimport LoadingComponent from \"../../app/layout/LoadingComponent\";\r\nimport { Order } from \"../../app/models/order\";\r\nimport { currencyFormat } from \"../../app/util/util\";\r\nimport OrderDetailed from \"./OrderDetailed\";\r\n\r\nexport default function Orders() {\r\n\r\n    const [orders,setOrders] = useState<Order[] | null>(null);\r\n    const [loading,setLoading] = useState(true);\r\n    const [selectedOrderNumber,setSelectedOrderNumber] = useState(0);\r\n\r\n    useEffect(() => {\r\n        agent.Orders.list()\r\n             .then(orders => setOrders(orders))\r\n             .catch(error => console.log(error))\r\n             .finally(() => setLoading(false));\r\n    },[])\r\n\r\n    if(loading) return <LoadingComponent message='Loading orders...' />\r\n\r\n    if(selectedOrderNumber > 0) return (\r\n      <OrderDetailed\r\n          order={orders?.find(o => o.id === selectedOrderNumber)!}\r\n          setSelectedOrder = {setSelectedOrderNumber}\r\n        />\r\n    )\r\n\r\n    return (\r\n        <TableContainer component={Paper}>\r\n          <Table sx={{ minWidth: 650 }} aria-label=\"simple table\">\r\n            <TableHead>\r\n              <TableRow>\r\n                <TableCell>Order number</TableCell>\r\n                <TableCell align=\"right\">Total</TableCell>\r\n                <TableCell align=\"right\">Order Date</TableCell>\r\n                <TableCell align=\"right\">Order Status</TableCell>\r\n                <TableCell align=\"right\"></TableCell>\r\n              </TableRow>\r\n            </TableHead>\r\n            <TableBody>\r\n              {orders?.map((order) => (\r\n                <TableRow\r\n                  key={order.id}\r\n                  sx={{ '&:last-child td, &:last-child th': { border: 0 } }}\r\n                >\r\n                  <TableCell component=\"th\" scope=\"row\">\r\n                    {order.id}\r\n                  </TableCell>\r\n                  <TableCell align=\"right\">{currencyFormat(order.total)}</TableCell>\r\n                  <TableCell align=\"right\">{order.orderDate.split('T')[0]}</TableCell>\r\n                  <TableCell align=\"right\">{order.orderStatus}</TableCell>\r\n                  <TableCell align=\"right\">\r\n                      <Button onClick={() => setSelectedOrderNumber(order.id)}>View</Button>\r\n                  </TableCell>\r\n                </TableRow>\r\n              ))}\r\n            </TableBody>\r\n          </Table>\r\n        </TableContainer>\r\n      );\r\n}","import {\n  Container,\n  createTheme,\n  CssBaseline,\n  ThemeProvider,\n} from \"@mui/material\";\nimport { useState,useEffect, useCallback } from \"react\";\nimport { Route, Switch } from \"react-router-dom\";\nimport { ToastContainer } from \"react-toastify\";\nimport AboutPage from \"../../features/about/AboutPage\";\nimport Catalog from \"../../features/catalog/catalog\";\nimport ProductDetails from \"../../features/catalog/ProductDetails\";\nimport ContactPage from \"../../features/contact/ContactPage\";\nimport HomePage from \"../../features/home/HomePage\";\nimport Header from \"./Header\";\nimport \"react-toastify/dist/ReactToastify.css\";\nimport ServerError from \"../errors/ServerError\";\nimport NotFound from \"../errors/NotFound\";\nimport BasketPage from \"../../features/basket/BasketPage\";\nimport LoadingComponent from \"./LoadingComponent\";\nimport CheckoutPage from \"../../features/checkout/CheckoutPage\";\nimport { useAppDispatch } from \"../store/configureStore\";\nimport { fetchBasketAsync } from \"../../features/basket/basketSlice\";\nimport Login from \"../../features/account/Login\";\nimport Register from \"../../features/account/Register\";\nimport { fetchCurrentUser } from \"../../features/account/accountSlice\";\nimport PrivateRoute from \"./PrivateRoute\";\nimport Orders from \"../../features/orders/Orders\";\n\nfunction App() {\n\n  const dispatch = useAppDispatch();\n  const [loading,setLoading] = useState(true);\n\n\n  const initApp = useCallback(async () =>  {\n    try {\n      await dispatch(fetchCurrentUser());\n      await dispatch(fetchBasketAsync());\n    }\n    catch(error:any) {\n      console.log(error);\n    }\n  },[dispatch]);\n\n\n  useEffect(() =>{\n      initApp().then(() => setLoading(false));\n  },[initApp])\n\n\n  const [darkMode, setDarkMode] = useState(false);\n  const paletteType = darkMode ? \"dark\" : \"light\";\n  const theme = createTheme({\n    palette: {\n      mode: paletteType,\n      background: {\n        default: paletteType === \"light\" ? \"#eaeaea\" : \"#121212\",\n      },\n    },\n  });\n\n  function handleThemeChange() {\n    setDarkMode(!darkMode);\n  }\n\n  if(loading) return <LoadingComponent message='Initializing app....' />\n  return (\n    <>\n      <ThemeProvider theme={theme}>\n        <ToastContainer position=\"bottom-right\" hideProgressBar />\n        <CssBaseline />\n        <Header darkMode={darkMode} handleThemeChange={handleThemeChange} />\n        <Route exact path=\"/\" component={HomePage} /> \n        <Route path={'/(.+)'} render={() => (\n          <Container  sx={{ mt: 4 }}>\n          <Switch>\n            <Route exact path=\"/catalog\" component={Catalog} />\n            <Route path=\"/catalog/:id\" component={ProductDetails} />\n            <Route path=\"/about\" component={AboutPage} />\n            <Route path=\"/contact\" component={ContactPage} />\n            <Route path=\"/server-error\" component={ServerError} />\n            <Route path=\"/basket\" component={BasketPage} />\n            <PrivateRoute path=\"/checkout\" component={CheckoutPage} />\n            <PrivateRoute path=\"/orders\" component={Orders} />\n            <Route path=\"/login\" component={Login} />\n            <Route path=\"/register\" component={Register} />\n            <Route component={NotFound} />\n          </Switch>\n          </Container>\n        )} />\n       \n      </ThemeProvider>\n    </>\n  );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./app/layout/index.css\";\nimport App from \"./app/layout/App\";\nimport reportWebVitals from \"./reportWebVitals\";\nimport { Router } from \"react-router-dom\";\nimport { createBrowserHistory } from \"history\";\nimport { StoreProvider } from \"./app/context/StoreContext\";\nimport { Provider } from \"react-redux\";\nimport { store } from \"./app/store/configureStore\";\nimport 'slick-carousel/slick/slick.css';\nimport 'slick-carousel/slick/slick-theme.css';\n\n\nexport const history = createBrowserHistory();\n\nReactDOM.render(\n  <React.StrictMode>\n    <Router history={history}>\n        <Provider store ={store}>\n        <App />\n        </Provider>\n    </Router>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}